{% extends "base/base.html" %}
{% block body %}
{% load static %}
{% load humanize %}

<STYle>
    .out-of-stock {
        position: absolute;
        top: 10px;
        left: 10px;
        background-color: red;
        color: white;
        font-size: 12px;
        font-weight: bold;
        padding: 5px 10px;
        border-radius: 4px;
        z-index: 10;
    }
    
    .sale-tag {
        position: absolute;
        top: 10px;
        left: 10px;
        background-color: green;
        color: white;
        font-size: 12px;
        font-weight: bold;
        padding: 5px 10px;
        border-radius: 4px;
        z-index: 10;
    }

    .img {
        background-color: transparent;
    }
</STYle>

<h2>Search Results for "{{ query }}"</h2>

{% if products %}
    <div class="product-grid">
        {% for product in products %}
        <div class="product-card" style="position: relative;">
            <a href="{% url 'get_products' product.slug %}" style="list-style: none; text-decoration:none">
                
                {% if product.products_images.first %}
                    <img src="{{ product.products_images.first.image.url }}" alt="Product Image" class="product-image">
                {% else %}
                    <img src="{% static 'images/default_product.jpg' %}" alt="Default Product Image" class="product-image">
                {% endif %}

                {% if product.stock == 0 %}
                    <span class="stock-tag out-of-stock">Out of Stock</span>
                {% else %}
                    <span class="sale-tag">Sale</span>
                {% endif %}

                <div class="product-info">
                    <h3 class="product-name">{{ product.product_name }}</h3>
                    <div class="star-rating">★★★★☆</div>
                    <p class="price">₹{{ product.price|intcomma }}</p>
                </div>
            </a>
        </div>
        {% endfor %}
    </div>
{% else %}
    <center>
        <img src="{% static 'images/oops.png' %}" alt="" class="img">
    </center>
    <h2 style="text-align: center;">No products found for "{{ query }}"</h2>
    <p style="text-align: center;">Try searching with different keywords.</p>
{% endif %}

{% endblock body %}
